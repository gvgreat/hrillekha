<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:p="http://primefaces.org/ui"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	xmlns:ui="http://java.sun.com/jsf/facelets">

	<p:panel>
		<div class="visual-block">
			<h2>Change Password</h2>
		</div>

		<p:panel id="panel" style="margin-bottom:10px;"
			header="#{crownUserController.currentUser.isNew() ? 'Create User' : 'Update User'}">
			<p:growl showSummary="true" showDetail="true" />
			<h:panelGrid columns="3">
				<h:outputLabel for="username" value="Username: " />
				<h:outputText id="username"
					value="#{crownUserController.currentUser.username}" required="true"
					label="Username" />
				<p:message for="username" />


				<p:outputLabel for="password" value="Old Password: " />
				<p:password id="password"
					value="#{crownUserController.currentUser.password}" required="true"
					label="Password" />
				<p:message for="password" />

				<p:outputLabel for="newpassword" value="New Password: " />
				<p:password id="newpassword"
					value="#{crownUserController.currentUser.changedPassword}"
					required="true" label="Password" feedback="true" match="pwd2"/>
				<p:message for="password"/>

				<p:outputLabel for="pwd2" value="Confirm New Password: " />
				<p:password id="pwd2"
					value="#{crownUserController.currentUser.changedPassword}"
					label="Confirm New Password" required="true" />
				<p:message for="pwd2" />
			</h:panelGrid>
		</p:panel>
		<p:separator />
		<p:commandButton value="Submit"
			update="#{navigationBean.UPDATE_FORM_ID}"
			action="#{crownUserController.updatePassword}" resetValues="true" />
		<p:commandButton actionListener="#{hotKeyController.getHomePage}"
			value="Cancel" process="@this"
			update="#{navigationBean.UPDATE_FORM_ID}" immediate="true" />
	</p:panel>
</ui:composition>
